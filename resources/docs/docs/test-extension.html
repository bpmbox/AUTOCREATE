<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIç¤¾é•·Chromeæ‹¡å¼µãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #3498db;
            border-radius: 8px;
            background-color: #ecf0f1;
        }
        .section h2 {
            color: #3498db;
            margin-top: 0;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        input[type="text"]:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .log {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            height: 200px;
            overflow-y: auto;
        }
        .instructions {
            background-color: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ffeaa7;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– AIç¤¾é•·Chromeæ‹¡å¼µãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</h1>
        
        <div class="instructions">
            <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆæ‰‹é †</h3>
            <ol>
                <li>Chromeæ‹¡å¼µã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>ã€Œå…¥åŠ›ãƒ†ã‚¹ãƒˆã€ãƒœã‚¿ãƒ³ã§ãƒšãƒ¼ã‚¸å…¥åŠ›æ¬„ã®æ¤œå‡ºã‚’ãƒ†ã‚¹ãƒˆ</li>
                <li>ã€Œæ‰‹å‹•ãƒã‚§ãƒƒã‚¯ã€ãƒœã‚¿ãƒ³ã§Supabaseé€šä¿¡ã‚’ãƒ†ã‚¹ãƒˆ</li>
                <li>æ‰‹å‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã§Supabaseã¸ã®æŠ•ç¨¿ã‚’ãƒ†ã‚¹ãƒˆ</li>
            </ol>
        </div>

        <div class="section">
            <h2>ğŸ’¬ ãƒãƒ£ãƒƒãƒˆå…¥åŠ›æ¬„ãƒ†ã‚¹ãƒˆ</h2>
            <input type="text" id="chat-input" placeholder="AIç¤¾é•·ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã“ã“ã«å…¥åŠ›ã•ã‚Œã¾ã™..." />
            <br>
            <button onclick="clearInput()">ã‚¯ãƒªã‚¢</button>
            <button onclick="testInput()">æ‰‹å‹•ãƒ†ã‚¹ãƒˆ</button>
            <div id="input-status" class="status info">å¾…æ©Ÿä¸­...</div>
        </div>

        <div class="section">
            <h2>ğŸ“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ãƒ†ã‚¹ãƒˆ</h2>
            <textarea id="message-area" rows="4" placeholder="é•·ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã“ã“ã«å…¥åŠ›ã•ã‚Œã¾ã™..."></textarea>
            <br>
            <button onclick="clearMessage()">ã‚¯ãƒªã‚¢</button>
            <button onclick="testMessage()">æ‰‹å‹•ãƒ†ã‚¹ãƒˆ</button>
            <div id="message-status" class="status info">å¾…æ©Ÿä¸­...</div>
        </div>

        <div class="section">
            <h2>ğŸš€ é€ä¿¡ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆ</h2>
            <button id="submit-btn" onclick="handleSubmit()">é€ä¿¡ãƒ†ã‚¹ãƒˆ</button>
            <button id="send-btn" onclick="handleSend()">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</button>
            <div id="submit-status" class="status info">é€ä¿¡å¾…æ©Ÿä¸­...</div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Chromeæ‹¡å¼µã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
            <button onclick="checkExtensionStatus()">æ‹¡å¼µæ©Ÿèƒ½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯</button>
            <div id="extension-status" class="status info">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªã—ã¦ãã ã•ã„</div>
        </div>

        <div class="section">
            <h2>ğŸ“œ ãƒ­ã‚°</h2>
            <div id="log" class="log">
AIç¤¾é•·Chromeæ‹¡å¼µãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†
æ™‚åˆ»: <span id="timestamp"></span>
Chromeæ‹¡å¼µã‚’æœ‰åŠ¹åŒ–ã—ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚
            </div>
        </div>
    </div>

    <script>
        // ç¾åœ¨æ™‚åˆ»ã‚’è¡¨ç¤º
        document.getElementById('timestamp').textContent = new Date().toLocaleString('ja-JP');
        
        function log(message) {
            const logElement = document.getElementById('log');
            const time = new Date().toLocaleTimeString('ja-JP');
            logElement.innerHTML += `\n[${time}] ${message}`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearInput() {
            document.getElementById('chat-input').value = '';
            document.getElementById('input-status').textContent = 'ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ';
            document.getElementById('input-status').className = 'status success';
            log('ãƒãƒ£ãƒƒãƒˆå…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢');
        }

        function testInput() {
            const testMessage = 'ğŸ¤– AIç¤¾é•·ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ‰‹å‹•ï¼‰: ' + new Date().toLocaleTimeString('ja-JP');
            document.getElementById('chat-input').value = testMessage;
            document.getElementById('input-status').textContent = 'æ‰‹å‹•ãƒ†ã‚¹ãƒˆå…¥åŠ›å®Œäº†';
            document.getElementById('input-status').className = 'status success';
            log('æ‰‹å‹•ãƒ†ã‚¹ãƒˆå…¥åŠ›: ' + testMessage.substring(0, 30) + '...');
        }

        function clearMessage() {
            document.getElementById('message-area').value = '';
            document.getElementById('message-status').textContent = 'ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ';
            document.getElementById('message-status').className = 'status success';
            log('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢');
        }

        function testMessage() {
            const testMessage = `ğŸ¤– AIç¤¾é•·ã‹ã‚‰ã®è©³ç´°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼‰

AUTOCREATEæ ªå¼ä¼šç¤¾AIç¤¾é•·ã§ã™ã€‚
ãƒ†ã‚¹ãƒˆæ™‚åˆ»: ${new Date().toLocaleString('ja-JP')}

ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ‰‹å‹•ãƒ†ã‚¹ãƒˆç”¨ã§ã™ã€‚
Chromeæ‹¡å¼µã®è‡ªå‹•å…¥åŠ›æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚

ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ³: æ­£å¸¸
é€šä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ãƒ†ã‚¹ãƒˆä¸­`;

            document.getElementById('message-area').value = testMessage;
            document.getElementById('message-status').textContent = 'æ‰‹å‹•ãƒ†ã‚¹ãƒˆå…¥åŠ›å®Œäº†';
            document.getElementById('message-status').className = 'status success';
            log('æ‰‹å‹•ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›å®Œäº†');
        }

        function handleSubmit() {
            document.getElementById('submit-status').textContent = 'é€ä¿¡ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼';
            document.getElementById('submit-status').className = 'status success';
            log('é€ä¿¡ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');
            
            // å®Ÿéš›ã®é€ä¿¡å‡¦ç†ã¯ã“ã“ã«å®Ÿè£…
            setTimeout(() => {
                document.getElementById('submit-status').textContent = 'é€ä¿¡å‡¦ç†å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰';
                log('é€ä¿¡å‡¦ç†å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰');
            }, 1000);
        }

        function handleSend() {
            document.getElementById('submit-status').textContent = 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼';
            document.getElementById('submit-status').className = 'status success';
            log('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');
            
            setTimeout(() => {
                document.getElementById('submit-status').textContent = 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰';
                log('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰');
            }, 1000);
        }

        function checkExtensionStatus() {
            log('Chromeæ‹¡å¼µã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªä¸­...');
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                document.getElementById('extension-status').textContent = 'Chromeæ‹¡å¼µãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ';
                document.getElementById('extension-status').className = 'status success';
                log('âœ… Chromeæ‹¡å¼µAPIæ¤œå‡ºæˆåŠŸ');
            } else {
                document.getElementById('extension-status').textContent = 'Chromeæ‹¡å¼µãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ';
                document.getElementById('extension-status').className = 'status error';
                log('âŒ Chromeæ‹¡å¼µAPIæ¤œå‡ºå¤±æ•—');
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
        window.addEventListener('load', () => {
            log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            log('Chromeæ‹¡å¼µãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸æº–å‚™å®Œäº†');
            log('æ‹¡å¼µæ©Ÿèƒ½ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã„ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„');
            
            // è‡ªå‹•çš„ã«æ‹¡å¼µæ©Ÿèƒ½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯
            setTimeout(checkExtensionStatus, 1000);
        });

        // Chromeæ‹¡å¼µã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã™ã‚‹æº–å‚™
        if (typeof chrome !== 'undefined' && chrome.runtime) {
            chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
                log('Chromeæ‹¡å¼µã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡: ' + JSON.stringify(request));
                sendResponse({success: true, message: 'ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§å—ä¿¡ã—ã¾ã—ãŸ'});
            });
        }
    </script>
</body>
</html>
